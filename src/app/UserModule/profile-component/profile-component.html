<!--===============================profile Einstellungen=========================================-->



<!-- Hier kommt das profile-->
<div class="profile-page">
  <div class="page-container"> 

    <!-- hier kommt profile daten wie Name, Email, und und.. -->
    <div class="profile-info">
      <div class="header">
        <h1 class="title">Profile</h1>
  
        <div class="logout-button">
          <button type="button" class="btn btn--danger" (click)="logout()">
            Logout
          </button>
        </div>
      </div>
  
      <!-- Loading -->
      <div *ngIf="loading" class="card card--loading">
        <div class="muted">Loading profile…</div>
      </div>
  
      <!-- Error -->
      <div *ngIf="error && !loading" class="card card--error">
        {{ error }}
      </div>
  
      <ng-container *ngIf="!loading">
        <div class="card card--profile" *ngIf="profile as p">
          <div class="user">
            <div class="avatar">
              {{ p.username?.slice(0, 1)?.toUpperCase() }}
            </div>
  
            <div class="fields">
              <!-- Username -->
              <div class="row">
                <div class="label">Username</div>
  
                <div class="value" *ngIf="!editingName">
                  <strong>{{ p.username }}</strong>
  
                  <button
                    type="button"
                    class="btn btn--small btn--ghost"
                    (click)="startEditName()"
                  >
                    Edit
                  </button>
                </div>
  
                <div class="value" *ngIf="editingName">
                  <input
                    class="input"
                    type="text"
                    [(ngModel)]="newUsername"
                    placeholder="New username"
                    autocomplete="off"
                  />
  
                  <button type="button" class="btn btn--small" (click)="saveName()">
                    Save
                  </button>
  
                  <button
                    type="button"
                    class="btn btn--small btn--ghost"
                    (click)="cancelEditName()"
                  >
                    Cancel
                  </button>
                </div>
              </div>
  
              <!-- Email -->
              <div class="row">
                <div class="label">Email</div>
                <div class="value">{{ p.email }}</div>
              </div>
  
              <!-- Member since -->
              <div class="row">
                <div class="label">Member since</div>
                <div class="value">{{ p.createdAt | date: 'longDate' }}</div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  
    <!-- hier kommt die Statisken der Users -->
    <div class="profile-statistics">
      <ng-container *ngIf="!loading">
        <div class="card card--stats" *ngIf="profile as p">
          <h2 class="section-title">Statistics</h2>
  
          <div class="stats">
            <div class="stat">
              <div class="stat__value">{{ p.stats.games }}</div>
              <div class="stat__label">Games</div>
            </div>
  
            <div class="stat">
              <div class="stat__value">{{ p.stats.wins }}</div>
              <div class="stat__label">Wins</div>
            </div>
  
            <div class="stat">
              <div class="stat__value">{{ p.stats.losses }}</div>
              <div class="stat__label">Losses</div>
            </div>
  
            <div class="stat">
              <div class="stat__value">{{ winRate }}%</div>
              <div class="stat__label">Win rate</div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  
    <!-- hier kommen die Einstellungen der Users -->
    <div class="profile-account">
      <ng-container *ngIf="!loading">
        <div class="card card--account">
          <h2 class="section-title">Account</h2>
  
          <div class="actions">
            <button type="button" class="btn btn--ghost" disabled>
              Change password (later)
            </button>
  
            <button type="button" class="btn btn--ghost" disabled>
              Change email (later)
            </button>
  
            <button type="button" class="btn btn--danger" (click)="logout()">
              Logout
            </button>
          </div>
  
          <div class="muted" style="margin-top: 10px;">
            hier kann man später mal sein Passwort und seine E-Mail ändern: wir schauen noch.
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
